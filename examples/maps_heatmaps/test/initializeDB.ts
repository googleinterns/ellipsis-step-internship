import { database } from "../src/index";
import * as firebase from "firebase";
import * as geofirestore from "geofirestore";

const allCoordinates = [
  [37.782551, -122.445368],
  [37.782745, -122.444586],
  [37.782842, -122.443688],
  [37.782919, -122.442815],
  [37.782992, -122.442112],
  [37.7831, -122.441461],
  [37.782551, -122.445368],
  [37.782745, -122.444586],
  [37.782842, -122.443688],
  [37.782919, -122.442815],
  [37.782992, -122.442112],
  [37.7831, -122.441461],
  [37.783206, -122.440829],
  [37.783273, -122.440324],
  [37.783316, -122.440023],
  [37.783357, -122.439794],
  [37.783371, -122.439687],
  [37.783206, -122.440829],
  [37.783273, -122.440324],
  [37.783316, -122.440023],
  [37.783357, -122.439794],
  [37.783371, -122.439687],
  [37.783368, -122.439666],
  [37.783383, -122.439594],
  [37.783508, -122.439525],
  [37.783842, -122.439591],
  [37.784147, -122.439668],
  [37.783368, -122.439666],
  [37.783383, -122.439594],
  [37.783508, -122.439525],
  [37.783842, -122.439591],
  [37.784147, -122.439668],
  [37.784206, -122.439686],
  [37.784386, -122.43979],
  [37.784701, -122.439902],
  [37.784965, -122.439938],
  [37.78501, -122.439947],
  [37.78536, -122.439952],
  [37.785715, -122.44003],
  [37.784206, -122.439686],
  [37.784386, -122.43979],
  [37.784701, -122.439902],
  [37.784965, -122.439938],
  [37.78501, -122.439947],
  [37.78536, -122.439952],
  [37.785715, -122.44003],
  [37.786117, -122.440119],
  [37.786564, -122.440209],
  [37.786905, -122.44027],
  [37.786956, -122.440279],
  [37.800224, -122.43352],
  [37.800155, -122.434101],
  [37.80016, -122.43443],
  [37.800378, -122.434527],
  [37.786117, -122.440119],
  [37.786564, -122.440209],
  [37.786905, -122.44027],
  [37.786956, -122.440279],
  [37.800224, -122.43352],
  [37.800155, -122.434101],
  [37.80016, -122.43443],
  [37.800378, -122.434527],
  [37.800738, -122.434598],
  [37.800938, -122.43465],
  [37.801024, -122.434889],
  [37.800955, -122.435392],
  [37.800886, -122.435959],
  [37.800738, -122.434598],
  [37.800938, -122.43465],
  [37.801024, -122.434889],
  [37.800955, -122.435392],
  [37.800886, -122.435959],
  [37.800811, -122.436275],
  [37.800788, -122.436299],
  [37.800719, -122.436302],
  [37.800702, -122.436298],
  [37.800661, -122.436273],
  [37.800395, -122.436172],
  [37.800811, -122.436275],
  [37.800788, -122.436299],
  [37.800719, -122.436302],
  [37.800702, -122.436298],
  [37.800661, -122.436273],
  [37.800395, -122.436172],
  [37.800228, -122.436116],
  [37.800169, -122.43613],
  [37.800066, -122.436167],
  [37.784345, -122.422922],
  [37.800228, -122.436116],
  [37.800169, -122.43613],
  [37.800066, -122.436167],
  [37.784345, -122.422922],
  [37.784389, -122.422926],
  [37.784437, -122.422924],
  [37.784746, -122.422818],
  [37.785436, -122.422959],
  [37.78612, -122.423112],
  [37.784389, -122.422926],
  [37.784437, -122.422924],
  [37.784746, -122.422818],
  [37.785436, -122.422959],
  [37.78612, -122.423112],
  [37.786433, -122.423029],
  [37.786631, -122.421213],
  [37.78666, -122.421033],
  [37.786801, -122.420141],
  [37.786823, -122.420034],
  [37.786433, -122.423029],
  [37.786631, -122.421213],
  [37.78666, -122.421033],
  [37.786801, -122.420141],
  [37.786823, -122.420034],
  [37.786831, -122.419916],
  [37.787034, -122.418208],
  [37.787056, -122.418034],
  [37.787169, -122.417145],
  [37.787217, -122.416715],
  [37.786831, -122.419916],
  [37.787034, -122.418208],
  [37.787056, -122.418034],
  [37.787169, -122.417145],
  [37.787217, -122.416715],
  [37.786144, -122.416403],
  [37.785292, -122.416257],
  [37.780666, -122.390374],
  [37.780501, -122.391281],
  [37.780148, -122.392052],
  [37.786144, -122.416403],
  [37.785292, -122.416257],
  [37.780666, -122.390374],
  [37.780501, -122.391281],
  [37.780148, -122.392052],
  [37.780173, -122.391148],
  [37.780693, -122.390592],
  [37.781261, -122.391142],
  [37.781808, -122.39173],
  [37.78234, -122.392341],
  [37.780173, -122.391148],
  [37.780693, -122.390592],
  [37.781261, -122.391142],
  [37.781808, -122.39173],
  [37.78234, -122.392341],
  [37.782812, -122.393022],
  [37.7833, -122.393672],
  [37.783809, -122.394275],
  [37.784246, -122.394979],
  [37.784791, -122.395958],
  [37.785675, -122.396746],
  [37.782812, -122.393022],
  [37.7833, -122.393672],
  [37.783809, -122.394275],
  [37.784246, -122.394979],
  [37.784791, -122.395958],
  [37.785675, -122.396746],
  [37.786262, -122.39578],
  [37.786776, -122.395093],
  [37.787282, -122.394426],
  [37.787783, -122.393767],
  [37.788343, -122.393184],
  [37.788895, -122.392506],
  [37.789371, -122.391701],
  [37.789722, -122.390952],
  [37.790315, -122.390305],
  [37.790738, -122.389616],
  [37.779448, -122.438702],
  [37.779023, -122.438585],
  [37.778542, -122.438492],
  [37.7781, -122.438411],
  [37.777986, -122.438376],
  [37.77768, -122.438313],
  [37.777316, -122.438273],
  [37.777135, -122.438254],
  [37.786262, -122.39578],
  [37.786776, -122.395093],
  [37.787282, -122.394426],
  [37.787783, -122.393767],
  [37.788343, -122.393184],
  [37.788895, -122.392506],
  [37.789371, -122.391701],
  [37.789722, -122.390952],
  [37.790315, -122.390305],
  [37.790738, -122.389616],
  [37.779448, -122.438702],
  [37.779023, -122.438585],
  [37.778542, -122.438492],
  [37.7781, -122.438411],
  [37.777986, -122.438376],
  [37.77768, -122.438313],
  [37.777316, -122.438273],
  [37.777135, -122.438254],
  [37.776987, -122.438303],
  [37.776946, -122.438404],
  [37.776944, -122.438467],
  [37.776892, -122.438459],
  [37.776842, -122.438442],
  [37.776822, -122.438391],
  [37.776814, -122.438412],
  [37.776987, -122.438303],
  [37.776946, -122.438404],
  [37.776944, -122.438467],
  [37.776892, -122.438459],
  [37.776842, -122.438442],
  [37.776822, -122.438391],
  [37.776814, -122.438412],
  [37.776787, -122.438628],
  [37.776729, -122.43865],
  [37.776759, -122.438677],
  [37.776772, -122.438498],
  [37.776787, -122.438389],
  [37.776787, -122.438628],
  [37.776729, -122.43865],
  [37.776759, -122.438677],
  [37.776772, -122.438498],
  [37.776787, -122.438389],
  [37.776848, -122.438283],
  [37.77687, -122.438239],
  [37.777015, -122.438198],
  [37.777333, -122.438256],
  [37.777595, -122.438308],
  [37.777797, -122.438344],
  [37.77816, -122.438442],
  [37.776848, -122.438283],
  [37.77687, -122.438239],
  [37.777015, -122.438198],
  [37.777333, -122.438256],
  [37.777595, -122.438308],
  [37.777797, -122.438344],
  [37.77816, -122.438442],
  [37.778414, -122.438508],
  [37.778445, -122.438516],
  [37.778503, -122.438529],
  [37.778607, -122.438549],
  [37.77867, -122.438644],
  [37.778847, -122.438706],
  [37.77924, -122.438744],
  [37.779738, -122.438822],
  [37.778414, -122.438508],
  [37.778445, -122.438516],
  [37.778503, -122.438529],
  [37.778607, -122.438549],
  [37.77867, -122.438644],
  [37.778847, -122.438706],
  [37.77924, -122.438744],
  [37.779738, -122.438822],
  [37.780201, -122.438882],
  [37.7804, -122.438905],
  [37.780501, -122.438921],
  [37.780892, -122.438986],
  [37.781446, -122.439087],
  [37.780201, -122.438882],
  [37.7804, -122.438905],
  [37.780501, -122.438921],
  [37.780892, -122.438986],
  [37.781446, -122.439087],
  [37.781985, -122.439199],
  [37.782239, -122.439249],
  [37.782286, -122.439266],
  [37.797847, -122.429388],
  [37.797874, -122.42918],
  [37.797885, -122.429069],
  [37.797887, -122.42905],
  [37.781985, -122.439199],
  [37.782239, -122.439249],
  [37.782286, -122.439266],
  [37.797847, -122.429388],
  [37.797874, -122.42918],
  [37.797885, -122.429069],
  [37.797887, -122.42905],
  [37.797933, -122.428954],
  [37.798242, -122.42899],
  [37.798617, -122.429075],
  [37.798719, -122.429092],
  [37.798944, -122.429145],
  [37.797933, -122.428954],
  [37.798242, -122.42899],
  [37.798617, -122.429075],
  [37.798719, -122.429092],
  [37.798944, -122.429145],
  [37.79932, -122.429251],
  [37.79959, -122.429309],
  [37.799677, -122.429324],
  [37.799966, -122.42936],
  [37.800288, -122.42943],
  [37.79932, -122.429251],
  [37.79959, -122.429309],
  [37.799677, -122.429324],
  [37.799966, -122.42936],
  [37.800288, -122.42943],
];

addImagesToDB(allCoordinates);

/* adds an image to 'images' collection*/
function addNewImage(
  url: string,
  label: string,
  lat: number,
  lng: number,
  year: number,
  month: number,
  day: number
) {
  const GeoFirestore = geofirestore.initializeApp(database);
  const geocollection = GeoFirestore.collection("images");
  const newDoc = geocollection.add({
    year: year,
    month: month,
    day: day,
    coordinates: new firebase.firestore.GeoPoint(lat, lng),
    labels: [label],
    url: url,
  });
  // newDoc.collection("labels").doc().set({
  //   name: label,
  // });
}

/* adds images to 'images' collection with randomized information
 from a set of coordinates*/
function addImagesToDB(points: Array<Array<number>>) {
  points.forEach((element) => {
    const latitude = element[0];
    const longitude = element[1];
    const year = 1990 + getRandomNumber(31);
    const month = getRandomNumber(12) + 1;
    const day = getRandomNumber(30) + 1;
    const numOfLabel = getRandomNumber(3);
    const label = ["dog", "bag", "cat"][numOfLabel];
    const url = [
      "https://live.staticflickr.com/5284/5338762379_59f7435b93_c.jpg",
      "https://live.staticflickr.com/65535/49748702651_07ae2b33b4_c.jpg",
      "https://live.staticflickr.com/3677/13545844805_170ec3746b_c.jpg",
    ][numOfLabel];
    addNewImage(url, label, latitude, longitude, year, month, day);
  });
}

/* returns a random integer from 0 to max-1*/
function getRandomNumber(max: number) {
  return Math.floor(Math.random() * Math.floor(max));
}

export { addImagesToDB, allCoordinates };
